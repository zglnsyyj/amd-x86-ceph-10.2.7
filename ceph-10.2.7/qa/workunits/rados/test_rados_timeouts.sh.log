+ delay_mon omap rados lspools
+ MSGTYPE=omap
+ shift
+ rados lspools --rados-mon-op-timeout 1 --ms-inject-delay-type mon --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type omap
error listing pools: (110) Connection timed out2018-03-05 14:28:57.199192 7f4daa7bba40 -1 librados: timed out waiting for first osdmap from monitors

+ '[' 1 -eq 0 ']'
+ delay_mon poolopreply rados mkpool test
+ MSGTYPE=poolopreply
+ shift
+ rados mkpool test --rados-mon-op-timeout 1 --ms-inject-delay-type mon --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type poolopreply
error creating pool test: (110) Connection timed out
+ '[' 1 -eq 0 ']'
+ delay_mon poolopreply rados mksnap -p test snap
+ MSGTYPE=poolopreply
+ shift
+ rados mksnap -p test snap --rados-mon-op-timeout 1 --ms-inject-delay-type mon --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type poolopreply
error creating pool test snapshot snap: (110) Connection timed out
+ '[' 1 -eq 0 ']'
+ delay_mon poolopreply rados rmpool test test --yes-i-really-really-mean-it
+ MSGTYPE=poolopreply
+ shift
+ rados rmpool test test --yes-i-really-really-mean-it --rados-mon-op-timeout 1 --ms-inject-delay-type mon --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type poolopreply
pool test could not be removed
error 110: (110) Connection timed out
+ '[' 1 -eq 0 ']'
+ delay_mon getpoolstats rados df
+ MSGTYPE=getpoolstats
+ shift
+ rados df --rados-mon-op-timeout 1 --ms-inject-delay-type mon --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type getpoolstats
error fetching pool stats: (110) Connection timed out
+ '[' 1 -eq 0 ']'
+ delay_mon mon_command ceph df
+ MSGTYPE=mon_command
+ shift
+ ceph df --rados-mon-op-timeout 1 --ms-inject-delay-type mon --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type mon_command
Error ETIMEDOUT: problem getting command descriptions from mon.
+ '[' 110 -eq 0 ']'
+ delay_mon omap ceph osd dump
+ MSGTYPE=omap
+ shift
+ ceph osd dump --rados-mon-op-timeout 1 --ms-inject-delay-type mon --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type omap
Error ETIMEDOUT: problem getting command descriptions from mon.
+ '[' 110 -eq 0 ']'
+ delay_mon omap ceph -s
+ MSGTYPE=omap
+ shift
+ ceph -s --rados-mon-op-timeout 1 --ms-inject-delay-type mon --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type omap
Error ETIMEDOUT: problem getting command descriptions from mon.
+ '[' 110 -eq 0 ']'
+ delay_osd osd_op_reply rados -p data put ls /bin/ls
+ MSGTYPE=osd_op_reply
+ shift
+ rados -p data put ls /bin/ls --rados-osd-op-timeout 1 --ms-inject-delay-type osd --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type osd_op_reply
error opening pool data: (2) No such file or directory
+ '[' 1 -eq 0 ']'
+ delay_osd osd_op_reply rados -p data get ls -
+ MSGTYPE=osd_op_reply
+ shift
+ rados -p data get ls - --rados-osd-op-timeout 1 --ms-inject-delay-type osd --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type osd_op_reply
error opening pool data: (2) No such file or directory
+ '[' 1 -eq 0 ']'
+ delay_osd osd_op_reply rados -p data ls
+ MSGTYPE=osd_op_reply
+ shift
+ rados -p data ls --rados-osd-op-timeout 1 --ms-inject-delay-type osd --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type osd_op_reply
error opening pool data: (2) No such file or directory
+ '[' 1 -eq 0 ']'
+ delay_osd command_reply ceph tell osd.0 bench 1 1
+ MSGTYPE=command_reply
+ shift
+ ceph tell osd.0 bench 1 1 --rados-osd-op-timeout 1 --ms-inject-delay-type osd --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type command_reply
Error ETIMEDOUT: problem getting command descriptions from osd.0
+ '[' 110 -eq 0 ']'
+ rbd create -s 1 test
+ delay_osd osd_op_reply rbd watch test
+ MSGTYPE=osd_op_reply
+ shift
+ rbd watch test --rados-osd-op-timeout 1 --ms-inject-delay-type osd --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type osd_op_reply
2018-03-05 14:29:08.667880 7fbd3e7ce700 -1 librbd::image::OpenRequest: failed to stat v2 image header: (110) Connection timed out
2018-03-05 14:29:08.668258 7fbd3dfcd700 -1 librbd::ImageState: 0x7fbd6786d170 failed to open image: (110) Connection timed out
rbd: error opening image test: (110) Connection timed out
+ '[' 110 -eq 0 ']'
+ delay_osd osd_op_reply rbd info test
+ MSGTYPE=osd_op_reply
+ shift
+ rbd info test --rados-osd-op-timeout 1 --ms-inject-delay-type osd --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type osd_op_reply
rbd: error opening image test: (110) Connection timed out
2018-03-05 14:29:09.737629 7faa8e184700 -1 librbd::image::OpenRequest: failed to stat v2 image header: (110) Connection timed out
2018-03-05 14:29:09.737834 7faa8d983700 -1 librbd::ImageState: 0x7faab751f8e0 failed to open image: (110) Connection timed out
+ '[' 110 -eq 0 ']'
+ delay_osd osd_op_reply rbd snap create test@snap
+ MSGTYPE=osd_op_reply
+ shift
+ rbd snap create test@snap --rados-osd-op-timeout 1 --ms-inject-delay-type osd --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type osd_op_reply
2018-03-05 14:29:10.795118 7f11db183700 -1 librbd::image::OpenRequest: failed to stat v2 image header: (110) Connection timed out
rbd: error opening image test: (110) Connection timed out
2018-03-05 14:29:10.795365 7f11da982700 -1 librbd::ImageState: 0x7f12051c35e0 failed to open image: (110) Connection timed out
+ '[' 110 -eq 0 ']'
+ delay_osd osd_op_reply rbd import /bin/ls ls
+ MSGTYPE=osd_op_reply
+ shift
+ rbd import /bin/ls ls --rados-osd-op-timeout 1 --ms-inject-delay-type osd --ms-inject-delay-max 10000000 --ms-inject-delay-probability 1 --ms-inject-delay-msg-type osd_op_reply
rbd: image creation failed
Importing image: 0% complete...failed.
rbd: import failed: (110) Connection timed out
2018-03-05 14:29:11.875444 7fa90c301d80 -1 librbd: Could not tell if ls already exists
+ '[' 110 -eq 0 ']'
+ rbd rm test
Removing image: 100% complete...done.
+ echo OK
OK
